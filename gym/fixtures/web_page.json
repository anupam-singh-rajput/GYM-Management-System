[
 {
  "breadcrumbs": null,
  "content_type": "Page Builder",
  "context_script": null,
  "css": ".full-width-image {\n  width: 100vw !important;\n  height: 100vh !important;\n  object-fit: cover !important;\n  display: block !important;\n  margin: 0 !important;\n  padding: 0 !important;\n}\nsection[data-section-template=\"Full Width Image\"] .container {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  padding: 0 !important;\n  margin: 0 !important;\n}",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "console.log(\"Hello World\");\n// document.getElementsByClassName(\"nav-avatar\")[0].style.display = \"none\";\n// document.getElementsByClassName(\"navbar-brand\")[0].style.display = \"none\";\n\n    window.onload = function() {\n        // Hide the element with the class 'nav-avatar'\n        document.getElementsByClassName(\"nav-avatar\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"navbar-brand\")[0].style.display = \"none\";\n    };\n",
  "main_section": null,
  "main_section_html": null,
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-07-09 12:36:59.747333",
  "module": "GYM",
  "name": "signup",
  "page_blocks": [
   {
    "add_background_image": 0,
    "add_border_at_bottom": 0,
    "add_border_at_top": 0,
    "add_bottom_padding": 1,
    "add_container": 1,
    "add_shade": 0,
    "add_top_padding": 0,
    "background_image": null,
    "css_class": null,
    "hide_block": 0,
    "parent": "signup",
    "parentfield": "page_blocks",
    "parenttype": "Web Page",
    "section_id": null,
    "web_template": "Full Width Image",
    "web_template_values": "{\"url\":\"https://img.freepik.com/premium-photo/empty-gym-with-exercise-equipment-weights_239711-39172.jpg?semt=ais_hybrid&w=740\"}"
   }
  ],
  "published": 1,
  "route": "Gym-Managment-System/landingpage",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Freestyle",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<html>\n<head>\n    <title>Login</title>\n    <link rel=\"stylesheet\" href=\"/assets/gym/css/login.css\"> <!-- Link to your custom CSS -->\n    <style>\n        /* Hide navbar on login page */\n        body.login-page nav {\n            display: none;\n        }\n        .navbar{\n            display:none;\n        }\n    </style>\n</head>\n<body class=\"login-page\">\n    <div class=\"login-container\">\n        <div class=\"login-box\">\n            <h2>Login</h2>\n            <form id=\"login_form\">\n                <div class=\"textbox\">\n                    <input type=\"email\" id=\"email\" name=\"email\" required placeholder=\"Enter your email\">\n                </div>\n                <div class=\"textbox\">\n                    <input type=\"password\" id=\"password\" name=\"password\" required placeholder=\"Enter your password\">\n                </div>\n                <div class=\"textbox\">\n                    <select id=\"role\" name=\"role\" required>\n                        <option value=\"\" disabled selected>Select your role</option>\n                        <option value=\"Trainer\">Trainer</option>\n                        <option value=\"User\">User</option>\n                    </select>\n                </div>\n                <button type=\"submit\" class=\"btn\">Login</button>\n            </form>\n        </div>\n    </div>\n\n    <script>\n        // login.js\n\n        document.getElementById('login_form').addEventListener('submit', function(event) {\n            event.preventDefault();  // Prevent default form submission\n        \n            let email = document.getElementById('email').value;\n            let password = document.getElementById('password').value;\n            let role = document.getElementById('role').value;  // Get selected role\n            \n            console.log(email);\n            console.log(password);\n            console.log(role);  // Check the role value\n        \n            frappe.call({\n                method: 'gym.gym.api.authenticate_user',  // Correct method path\n                args: {\n                    email: email,\n                    password: password,\n                    role: role  // Send role to the backend\n                },\n                callback: function(response) {\n                    // Check response from the backend\n                    if (response.message.success) {\n                        // Successfully authenticated\n                        localStorage.setItem('email', email);\n                        localStorage.setItem('role', role);  // Store role in localStorage\n                        frappe.session.user_email = email;\n\n                        if (response.message.role === 'Admin') {\n                            window.location.href = '/Gym-Managment-System/landingpage';  // Redirect to Admin Dashboard\n                        } else if (response.message.role === 'Trainer') {\n                            window.location.href = '/Gym-Managment-System/landingpage';  // Redirect to Trainer Dashboard\n                        } else {\n                            window.location.href = '/Gym-Managment-System/landingpage';  // Redirect to User Dashboard\n                        }\n                    } else {\n                        // Show specific error messages based on the response\n                        let errorMessage = '';\n                        if (response.message === 'Invalid email') {\n                            errorMessage = 'The email you entered is not registered.';\n                        } else if (response.message === 'Invalid role') {\n                            errorMessage = 'Your role is not valid. Please contact support.';\n                        } else if (response.message === 'Invalid password') {\n                            errorMessage = 'The password you entered is incorrect.';\n                        } else {\n                            errorMessage = 'An unknown error occurred. Please try again.';\n                        }\n\n                        // Show the error message to the user\n                        frappe.msgprint(errorMessage);\n                    }\n                }\n            });\n        });\n        \n        \n        /////////////////////////////////////////////////////////////////////////////////////////////////////\n        \n        \n         function createNavbar() {\n            // Navbar container\n            const navbarContainer = document.getElementById('navbar-container');\n\n            // Create the nav element\n            const navbar = document.createElement('nav');\n            navbar.classList.add('navbar');\n\n            // Create navbar content (logo and logout button)\n            const logo = document.createElement('div');\n            logo.classList.add('navbar-logo');\n            logo.innerHTML = `<h3>My Gym</h3>`; // Logo can be an image or text\n\n            const logoutButton = document.createElement('button');\n            logoutButton.classList.add('logout-btn');\n            logoutButton.innerText = 'Logout';\n\n            // Append logo and logout button to navbar\n            navbar.appendChild(logo);\n            navbar.appendChild(logoutButton);\n\n            // Append the navbar to the navbar container\n            navbarContainer.appendChild(navbar);\n\n            // Add event listener to the logout button\n            logoutButton.addEventListener('click', function() {\n                logoutUser();\n            });\n        }\n\n        // Function to logout the user\n        function logoutUser() {\n            // Clear user data from localStorage (email in this case)\n            localStorage.removeItem('email');\n\n            // Optionally, you can clear other user-specific data from localStorage\n            // localStorage.removeItem('role');\n            \n            // Redirect to the login page and clear the browser history for that domain\n            window.location.replace('/login');  // Replace current page with login page, and clear history\n        }\n\n        // Call the function to create the navbar on page load\n        window.onload = function() {\n            createNavbar();\n        };\n        \n        \n        \n    </script>\n</body>\n</html>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-07-09 13:47:43.961532",
  "module": "GYM",
  "name": "login",
  "page_blocks": [],
  "published": 1,
  "route": "Gym-Managment-System/gym-login",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Login",
  "website_sidebar": null
 }
]